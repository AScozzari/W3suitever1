# W3 Suite & Brand Interface Environment Configuration
# Copy this file to .env and configure with your actual values
# CRITICAL: All these values MUST be changed in production!

# ==================== SECURITY CRITICAL ====================
# JWT Secret - MUST be a strong random string in production (min 32 chars)
# Generate with: openssl rand -base64 32
JWT_SECRET=CHANGE_THIS_IN_PRODUCTION_USE_OPENSSL_RAND_BASE64_32

# OAuth2 Server Configuration
# Client secrets MUST be unique and strong in production
OAUTH_CLIENT_ID=w3suite-client
OAUTH_CLIENT_SECRET=CHANGE_THIS_IN_PRODUCTION_USE_STRONG_SECRET
OAUTH_REDIRECT_URI=http://localhost:5000/callback

# Brand Interface OAuth Client
BRAND_OAUTH_CLIENT_ID=brand-interface-client
BRAND_OAUTH_CLIENT_SECRET=CHANGE_THIS_IN_PRODUCTION_USE_DIFFERENT_SECRET
BRAND_OAUTH_REDIRECT_URI=http://localhost:5000/brandinterface/callback

# ==================== DATABASE ====================
# PostgreSQL Connection (Neon)
DATABASE_URL=postgresql://user:password@host:5432/database?sslmode=require
PGHOST=localhost
PGUSER=postgres
PGPASSWORD=postgres
PGDATABASE=w3suite
PGPORT=5432

# Database Encryption Key (for sensitive data at rest)
DB_ENCRYPTION_KEY=CHANGE_THIS_32_CHAR_ENCRYPTION_KEY_PRODUCTION

# ==================== SESSION MANAGEMENT ====================
# Session Secret - MUST be changed in production
SESSION_SECRET=CHANGE_THIS_SESSION_SECRET_IN_PRODUCTION
SESSION_COOKIE_NAME=w3suite_session
SESSION_MAX_AGE=86400000  # 24 hours in milliseconds

# Brand Interface Session (separate from W3 Suite)
BRAND_SESSION_SECRET=CHANGE_THIS_BRAND_SESSION_SECRET_PRODUCTION
BRAND_SESSION_COOKIE_NAME=brand_session
BRAND_SESSION_MAX_AGE=3600000  # 1 hour (more restrictive)

# ==================== CORS & SECURITY ====================
# Allowed Origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5000
BRAND_CORS_ORIGINS=http://localhost:3001,http://localhost:5000

# Security Headers
HSTS_MAX_AGE=31536000
CSP_REPORT_URI=/api/csp-report

# ==================== API GATEWAY ====================
# Gateway Configuration
GATEWAY_PORT=5000
GATEWAY_TIMEOUT=30000  # 30 seconds
GATEWAY_RETRY_ATTEMPTS=1
GATEWAY_RETRY_DELAY=1000  # 1 second

# Service URLs (internal)
W3_SUITE_URL=http://localhost:3000
BRAND_INTERFACE_URL=http://localhost:3001

# ==================== RATE LIMITING ====================
# API Rate Limits
API_RATE_LIMIT_WINDOW=60000  # 1 minute
API_RATE_LIMIT_MAX=100  # requests per window
AUTH_RATE_LIMIT_WINDOW=900000  # 15 minutes
AUTH_RATE_LIMIT_MAX=5  # login attempts

# Brand Interface Rate Limits (more restrictive)
BRAND_API_RATE_LIMIT_MAX=60
BRAND_AUTH_RATE_LIMIT_MAX=3

# ==================== LOGGING & MONITORING ====================
# Log Level (error, warn, info, debug)
LOG_LEVEL=info
NODE_ENV=development

# Monitoring & Telemetry
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_TRACING=false
JAEGER_ENDPOINT=http://localhost:14268/api/traces

# ==================== EMAIL & NOTIFICATIONS ====================
# Email Service (SendGrid, AWS SES, etc.)
EMAIL_PROVIDER=sendgrid
SENDGRID_API_KEY=CHANGE_THIS_SENDGRID_API_KEY
EMAIL_FROM=noreply@w3suite.com
EMAIL_REPLY_TO=support@w3suite.com

# ==================== EXTERNAL SERVICES ====================
# Google OAuth (if using social login)
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=CHANGE_THIS_GOOGLE_CLIENT_SECRET

# Stripe (for payments)
STRIPE_PUBLIC_KEY=pk_test_CHANGE_THIS
STRIPE_SECRET_KEY=sk_test_CHANGE_THIS
STRIPE_WEBHOOK_SECRET=whsec_CHANGE_THIS

# AWS (for S3, etc.)
AWS_ACCESS_KEY_ID=CHANGE_THIS_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=CHANGE_THIS_AWS_SECRET_KEY
AWS_REGION=us-east-1
S3_BUCKET_NAME=w3suite-assets

# ==================== FEATURE FLAGS ====================
# Enable/Disable Features
ENABLE_BRAND_INTERFACE=true
ENABLE_OAUTH2_SERVER=true
ENABLE_MULTITENANT=true
ENABLE_AUDIT_LOG=true
ENABLE_2FA=false

# ==================== DEVELOPMENT ONLY ====================
# These should NEVER be used in production
DEV_AUTO_LOGIN=false
DEV_SKIP_AUTH=false
DEV_VERBOSE_LOGGING=true
VITE_HMR_PORT=24678  # Brand Interface HMR port

# ==================== BACKUP & RECOVERY ====================
# Backup Configuration
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # 2 AM daily
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=w3suite-backups

# ==================== SECURITY NOTES ====================
# 
# CRITICAL SECURITY REQUIREMENTS:
# 
# 1. NEVER commit this file with actual secrets to version control
# 2. Use strong, unique passwords for each secret (min 32 chars)
# 3. Rotate all secrets regularly (every 90 days minimum)
# 4. Use different secrets for each environment (dev, staging, prod)
# 5. Store production secrets in a secure vault (AWS Secrets Manager, HashiCorp Vault, etc.)
# 6. Enable audit logging for all secret access
# 7. Use environment-specific encryption keys
# 8. Implement secret scanning in CI/CD pipeline
# 
# GENERATE SECURE SECRETS:
# - JWT_SECRET: openssl rand -base64 32
# - SESSION_SECRET: openssl rand -hex 32
# - CLIENT_SECRET: uuidgen | sha256sum | base64 | head -c 32
# - ENCRYPTION_KEY: openssl rand -hex 16
# 
# PRODUCTION CHECKLIST:
# [ ] All default values changed
# [ ] Strong secrets generated (32+ chars)
# [ ] Database SSL enabled
# [ ] CORS origins restricted to production domains
# [ ] Rate limits configured appropriately
# [ ] Monitoring and alerting enabled
# [ ] Backup strategy implemented
# [ ] Secret rotation schedule defined
# [ ] Security headers validated
# [ ] HTTPS enforced everywhere
#